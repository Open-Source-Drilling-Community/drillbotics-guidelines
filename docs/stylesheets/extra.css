/* Minimal, non‑Insiders tweaks for Material */

/*
  Brand/header color override
  - Sets a deeper blue for the primary color used by the header/nav
  - Applies to both light (default) and dark (slate) schemes
  - Adjust the --db-primary value below to fine‑tune
*/
:root { --db-primary: #0d47a1; } /* Material Blue 900 */
[data-md-color-scheme="default"] {
  --md-primary-fg-color: var(--db-primary);
  --md-primary-fg-color--light: #1565c0; /* Blue 800 */
  --md-primary-fg-color--dark: #0b3c91;  /* Deeper blue */
}
[data-md-color-scheme="slate"] {
  --md-primary-fg-color: var(--db-primary);
  --md-primary-fg-color--light: #1976d2; /* Blue 700 */
  --md-primary-fg-color--dark: #0b3c91;
}

/* Subtle hero styling on the homepage */
.hero {
  margin: 0 0 1rem;
  padding: 1.5rem 1rem;
  text-align: center;
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,.06);
  background: linear-gradient(180deg, rgba(0,0,0,.02), rgba(0,0,0,.01));
}
[data-md-color-scheme="slate"] .hero {
  border-color: rgba(255,255,255,.12);
  background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
}
.hero .md-button { margin: .125rem .25rem; }

/* Small spacing refinements for grid cards */
.md-typeset .grid.cards { gap: .6rem; }
.md-typeset .grid.cards > ul > li {
  padding: .85rem .95rem;
  border-radius: 12px;
  border: 1px solid rgba(13,71,161,.16);
  box-shadow: 0 10px 28px rgba(13,71,161,.08);
  transition: transform .18s ease, box-shadow .18s ease;
}
.md-typeset .grid.cards > ul > li:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 32px rgba(13,71,161,.14);
}
[data-md-color-scheme="slate"] .md-typeset .grid.cards > ul > li {
  border-color: rgba(130,177,255,.35);
  box-shadow: 0 10px 28px rgba(12,39,91,.55);
}
[data-md-color-scheme="slate"] .md-typeset .grid.cards > ul > li:hover {
  box-shadow: 0 12px 34px rgba(12,39,91,.7);
}

/* Highlight the active top-level navigation tab */
.md-tabs__link--active {
  border-bottom: 3px solid var(--db-primary);
  margin-bottom: -3px;
  font-weight: 600;
}
[data-md-color-scheme="slate"] .md-tabs__link--active {
  border-bottom-color: var(--md-primary-fg-color--light);
}

/* Keep the announcement banner readable with minimal styling */
.db-announcement {
  position: sticky;
  top: 0;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  padding: .65rem 1rem;
  border-bottom: 1px solid rgba(13,71,161,.25);
  background: rgba(13,71,161,.12);
  color: var(--db-primary);
}
[data-md-color-scheme="slate"] .db-announcement {
  border-bottom-color: rgba(130,177,255,.45);
  background: rgba(25,118,210,.35);
  color: #e3f2fd;
}
.db-announcement__link { font-weight: 600; text-decoration: none; }
.db-announcement__close {
  border: 0;
  background: transparent;
  font-size: 18px;
  line-height: 1;
  cursor: pointer;
  opacity: .7;
  color: inherit;
}

/* Make the header logo larger */
.md-header__button.md-logo img {
  height: 45px;
  width: auto;
}
@media (max-width: 600px) {
  .md-header__button.md-logo img { height: 52px; }
}

/* Ensure the logo is visible in both light and dark modes */
[data-md-color-scheme="default"] .md-header__button.md-logo img,
[data-md-color-scheme="slate"] .md-header__button.md-logo img {
  /* Force the black logo to white for contrast on dark header */
  filter: brightness(0) invert(1);
}

/* Hide the repo link next to search and in the drawer */
.md-header__source,
.md-nav__source {
  display: none !important;
}

/* Mermaid: adaptive colors for light/dark mode */
:root {
  --db-mm-edge: var(--md-default-fg-color--lighter);
  --db-mm-text: var(--md-default-fg-color);
  /* Light palette for custom classes */
  --db-mm-startEnd-fill: #e1f5fe;
  --db-mm-startEnd-stroke: #01579b;
  --db-mm-decision-fill: #fff3e0;
  --db-mm-decision-stroke: #e65100;
  --db-mm-process-fill: #f3e5f5;
  --db-mm-process-stroke: #4a148c;
  --db-mm-feedback-fill: #ffebee;
  --db-mm-feedback-stroke: #c62828;
}

[data-md-color-scheme="slate"] {
  --db-mm-edge: var(--md-default-fg-color--lightest);
  --db-mm-text: var(--md-default-fg-color);
  /* Dark palette tuned for contrast on slate */
  --db-mm-startEnd-fill: #0b3b57;
  --db-mm-startEnd-stroke: #4fc3f7;
  --db-mm-decision-fill: #3b2a17;
  --db-mm-decision-stroke: #ffb74d;
  --db-mm-process-fill: #2c1b36;
  --db-mm-process-stroke: #ce93d8;
  --db-mm-feedback-fill: #3a1a1a;
  --db-mm-feedback-stroke: #ef9a9a;
}

/* Apply base text/edge colors */
.mermaid svg { color: var(--db-mm-text); }
.mermaid .edgePath path,
.mermaid .flowchart-link { stroke: var(--db-mm-edge) !important; }
.mermaid marker path,
.mermaid .arrowheadPath { fill: var(--db-mm-edge) !important; stroke: var(--db-mm-edge) !important; }
.mermaid .edgeLabel { color: var(--db-mm-text) !important; fill: var(--db-mm-text) !important; }
.mermaid .label, .mermaid text { fill: var(--db-mm-text) !important; color: var(--db-mm-text) !important; }

/* Override classDef colors for better dark-mode contrast */
.mermaid .node.startEnd rect,
.mermaid .node.startEnd circle { fill: var(--db-mm-startEnd-fill) !important; stroke: var(--db-mm-startEnd-stroke) !important; }
.mermaid .node.decision polygon,
.mermaid .node.decision path { fill: var(--db-mm-decision-fill) !important; stroke: var(--db-mm-decision-stroke) !important; }
.mermaid .node.process rect { fill: var(--db-mm-process-fill) !important; stroke: var(--db-mm-process-stroke) !important; }
.mermaid .node.feedback rect { fill: var(--db-mm-feedback-fill) !important; stroke: var(--db-mm-feedback-stroke) !important; }

/* Optional: subgraph clusters */
.mermaid .cluster rect { stroke: var(--db-mm-edge) !important; }

/*
  Integrated ToC (toc.integrate) refinements
  - Improves readability for long pages like Archive (2024)
  - Keeps only first-level entries, shows a compact label, and
    lightens the left rule so the nav remains the primary focus
*/
.md-nav--secondary {
  /* soften the left rule and tighten spacing */
  border-left: 1px solid rgba(13,71,161,.18);
  margin-left: .15rem;
  padding-left: .5rem;
  font-size: .86em;
  line-height: 1.25;
}
[data-md-color-scheme="slate"] .md-nav--secondary {
  border-left-color: rgba(130,177,255,.32);
}

/* Make the "Table of contents" label visible and compact */
.md-nav--secondary > .md-nav__title {
  display: block !important;
  margin: .25rem 0 .35rem .05rem;
  text-transform: uppercase;
  letter-spacing: .02em;
  font-weight: 600;
  font-size: .72rem;
  color: rgba(13,71,161,.55);
}
[data-md-color-scheme="slate"] .md-nav--secondary > .md-nav__title {
  color: rgba(173,208,255,.72);
}

/* Show only first-level entries in the integrated ToC */
.md-nav--secondary .md-nav__list > .md-nav__item > nav {
  display: none;
}

/* Tidy long headings */
.md-nav--secondary .md-ellipsis {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
