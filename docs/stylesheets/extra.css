/* Minimal, non-Insiders tweaks for Material */

/*
  Brand tokens derived from the active Material palette
  - Keeps overrides aligned with the configured palette colors
  - Uses color-mix so light/dark schemes stay in family
*/
:root {
  /* Ensure Material uses our deep blue as the brand primary */
  --md-primary-fg-color: #0d47a1;
  --md-primary-fg-color--light: #5472d3;
  --md-primary-fg-color--dark: #002171;

  --db-primary: var(--md-primary-fg-color);
  --db-primary-outline: color-mix(in srgb, var(--db-primary) 20%, transparent);
  --db-primary-shadow: color-mix(in srgb, var(--db-primary) 14%, transparent);
  --db-primary-subtitle: color-mix(in srgb, var(--db-primary) 72%, white);
  --db-hero-grad-start: color-mix(in srgb, var(--db-primary) 92%, black 8%);
  --db-hero-grad-end: color-mix(in srgb, var(--db-primary) 75%, black 25%);
  /* Match header/banner exactly to the configured primary */
  --db-header-bg: var(--md-primary-fg-color);
  --db-accent: var(--md-accent-fg-color);
  --db-accent-outline: color-mix(in srgb, var(--db-accent) 25%, transparent);
  --db-accent-bg: color-mix(in srgb, var(--db-accent) 12%, transparent);
}

[data-md-color-scheme="slate"] {
  /* Keep brand primary identical in dark mode */
  --md-primary-fg-color: #0d47a1;
  --md-primary-fg-color--light: #5e87e0;
  --md-primary-fg-color--dark: #082a63;

  --db-primary-outline: color-mix(in srgb, var(--db-primary) 42%, transparent);
  --db-primary-shadow: color-mix(in srgb, var(--db-primary) 65%, transparent);
  --db-primary-subtitle: color-mix(in srgb, var(--db-primary) 68%, white);
  --db-hero-grad-start: color-mix(in srgb, var(--db-primary) 88%, black 12%);
  --db-hero-grad-end: color-mix(in srgb, var(--db-primary) 70%, black 30%);
  --db-header-bg: var(--md-primary-fg-color);
  --db-accent-outline: color-mix(in srgb, var(--db-accent) 55%, transparent);
  --db-accent-bg: color-mix(in srgb, var(--db-accent) 20%, transparent);
}

/* Header/tab background tuned for legacy deep-blue tone */
.md-header {
  background: var(--db-header-bg);
}

.md-tabs {
  background: color-mix(in srgb, var(--db-header-bg) 88%, transparent);
  border-bottom: 1px solid color-mix(in srgb, var(--db-header-bg) 55%, transparent);
}

/* Subtle hero styling on the homepage */
.hero {
  margin: 1.2rem 0 1.4rem;
  padding: 2rem 1.5rem;
  text-align: center;
  border-radius: 16px;
  background: linear-gradient(135deg, var(--db-hero-grad-start), var(--db-hero-grad-end));
  color: #fff;
  box-shadow: 0 20px 45px var(--db-primary-shadow);
}
[data-md-color-scheme="slate"] .hero {
  box-shadow: 0 24px 45px color-mix(in srgb, var(--db-primary) 70%, transparent);
}
.hero .md-button { margin: .125rem .25rem; }
.hero h3 { margin-bottom: 1rem; letter-spacing: .015em; }

/* Small spacing refinements for grid cards */
.md-typeset .grid.cards { gap: .6rem; }
.md-typeset .grid.cards > ul > li {
  padding: .85rem .95rem;
  border-radius: 12px;
  border: 1px solid var(--db-primary-outline);
  box-shadow: 0 10px 28px var(--db-primary-shadow);
  transition: transform .18s ease, box-shadow .18s ease;
}
.md-typeset .grid.cards > ul > li .card-subtitle {
  display: block;
  margin-bottom: .35rem;
  color: var(--db-primary-subtitle);
  font-size: .78rem;
  letter-spacing: .01em;
  text-transform: uppercase;
  font-weight: 600;
}
.md-typeset .grid.cards > ul > li p + .card-subtitle { margin-top: -.25rem; }
.md-typeset .grid.cards > ul > li:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 32px color-mix(in srgb, var(--db-primary) 18%, transparent);
}
[data-md-color-scheme="slate"] .md-typeset .grid.cards > ul > li {
  border-color: color-mix(in srgb, var(--db-primary) 55%, transparent);
  box-shadow: 0 10px 28px color-mix(in srgb, var(--db-primary) 58%, transparent);
}
[data-md-color-scheme="slate"] .md-typeset .grid.cards > ul > li:hover {
  box-shadow: 0 12px 34px color-mix(in srgb, var(--db-primary) 68%, transparent);
}
[data-md-color-scheme="slate"] .md-typeset .grid.cards > ul > li .card-subtitle {
  color: color-mix(in srgb, var(--db-primary) 65%, white);
}

/* Icon alignment inside cards */
.md-typeset .grid.cards svg {
  width: 1.15em;
  height: 1.15em;
  vertical-align: middle;
  margin-right: .2rem;
}

/* Button rows */
.btn-row {
  display: flex;
  flex-wrap: wrap;
  gap: .5rem;
  margin: .75rem 0 1.25rem;
  justify-content: center;
}
.btn-row .md-button { flex: 0 1 auto; }

.md-typeset .md-button.md-button--secondary {
  border: 1px solid var(--db-accent-outline);
  color: var(--db-accent);
  background: var(--db-accent-bg);
  box-shadow: 0 2px 10px color-mix(in srgb, var(--db-accent) 14%, transparent);
  transition: background .15s ease, color .15s ease, box-shadow .15s ease, border-color .15s ease;
}

.md-typeset .md-button.md-button--secondary:hover,
.md-typeset .md-button.md-button--secondary:focus {
  border-color: color-mix(in srgb, var(--db-accent) 45%, transparent);
  background: color-mix(in srgb, var(--db-accent) 22%, transparent);
  color: color-mix(in srgb, var(--db-accent) 85%, white);
  box-shadow: 0 6px 18px color-mix(in srgb, var(--db-accent) 24%, transparent);
}

/* Highlight the active top-level navigation tab */
.md-tabs__link--active {
  border-bottom: 3px solid var(--db-primary);
  margin-bottom: -3px;
  font-weight: 600;
}
[data-md-color-scheme="slate"] .md-tabs__link--active {
  border-bottom-color: color-mix(in srgb, var(--db-primary) 70%, white);
}

/* Keep the announcement banner readable with minimal styling */
.db-announcement {
  position: sticky;
  top: 0;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  padding: .65rem 1rem;
  border-bottom: 1px solid var(--db-primary-outline);
  /* Match the site header color exactly */
  background: var(--md-primary-fg-color);
  color: #fff;
}
[data-md-color-scheme="slate"] .db-announcement {
  border-bottom-color: color-mix(in srgb, var(--db-primary) 55%, transparent);
  /* Keep banner identical to header in dark mode too */
  background: var(--md-primary-fg-color);
  color: #fff;
}
.db-announcement__link { font-weight: 600; text-decoration: none; }
.db-announcement__link:hover { text-decoration: underline; }
.db-announcement__close {
  border: 0;
  background: transparent;
  font-size: 18px;
  line-height: 1;
  cursor: pointer;
  opacity: .7;
  color: inherit;
}

/* Make the header logo larger */
.md-header__button.md-logo img {
  height: 45px;
  width: auto;
}
@media (max-width: 600px) {
  .md-header__button.md-logo img { height: 52px; }
}

/* Ensure the logo is visible in both light and dark modes */
[data-md-color-scheme="default"] .md-header__button.md-logo img,
[data-md-color-scheme="slate"] .md-header__button.md-logo img {
  /* Force the black logo to white for contrast on dark header */
  filter: brightness(0) invert(1);
}

/* Hide the repo link next to search and in the drawer */
.md-header__source,
.md-nav__source {
  display: none !important;
}

/* Mermaid: adaptive colors for light/dark mode */
:root {
  --db-mm-edge: var(--md-default-fg-color--lighter);
  --db-mm-text: var(--md-default-fg-color);
  /* Light palette for custom classes */
  --db-mm-startEnd-fill: #e1f5fe;
  --db-mm-startEnd-stroke: #01579b;
  --db-mm-decision-fill: #fff3e0;
  --db-mm-decision-stroke: #e65100;
  --db-mm-process-fill: #f3e5f5;
  --db-mm-process-stroke: #4a148c;
  --db-mm-feedback-fill: #ffebee;
  --db-mm-feedback-stroke: #c62828;
}

[data-md-color-scheme="slate"] {
  --db-mm-edge: var(--md-default-fg-color--lightest);
  /* Force high-contrast text in dark mode */
  --db-mm-text: rgba(255,255,255,.92);
  /* Dark palette tuned for contrast on slate */
  --db-mm-startEnd-fill: #0b3b57;
  --db-mm-startEnd-stroke: #4fc3f7;
  --db-mm-decision-fill: #3b2a17;
  --db-mm-decision-stroke: #ffb74d;
  --db-mm-process-fill: #2c1b36;
  --db-mm-process-stroke: #ce93d8;
  --db-mm-feedback-fill: #3a1a1a;
  --db-mm-feedback-stroke: #ef9a9a;
}

/* Apply base text/edge colors */
.mermaid svg { color: var(--db-mm-text); }
.mermaid .edgePath path,
.mermaid .flowchart-link { stroke: var(--db-mm-edge) !important; }
.mermaid marker path,
.mermaid .arrowheadPath { fill: var(--db-mm-edge) !important; stroke: var(--db-mm-edge) !important; }
/* Cover both <text> and <foreignObject> labels */
.mermaid .edgeLabel { color: var(--db-mm-text) !important; fill: var(--db-mm-text) !important; }
.mermaid .nodeLabel,
.mermaid .label,
.mermaid text,
.mermaid foreignObject div,
.mermaid foreignObject span { color: var(--db-mm-text) !important; fill: var(--db-mm-text) !important; }

/* Override classDef colors for better dark-mode contrast */
.mermaid .node.startEnd rect,
.mermaid .node.startEnd circle { fill: var(--db-mm-startEnd-fill) !important; stroke: var(--db-mm-startEnd-stroke) !important; }
.mermaid .node.decision polygon,
.mermaid .node.decision path { fill: var(--db-mm-decision-fill) !important; stroke: var(--db-mm-decision-stroke) !important; }
.mermaid .node.process rect { fill: var(--db-mm-process-fill) !important; stroke: var(--db-mm-process-stroke) !important; }
.mermaid .node.feedback rect { fill: var(--db-mm-feedback-fill) !important; stroke: var(--db-mm-feedback-stroke) !important; }

/* Optional: subgraph clusters */
.mermaid .cluster rect { stroke: var(--db-mm-edge) !important; }

/*
  Integrated ToC (toc.integrate) refinements
  - Improves readability for long pages like Archive (2024)
  - Keeps only first-level entries, shows a compact label, and
    lightens the left rule so the nav remains the primary focus
*/
.md-nav--secondary {
  /* soften the left rule and tighten spacing */
  border-left: 1px solid rgba(13,71,161,.18);
  margin-left: .15rem;
  padding-left: .5rem;
  font-size: .86em;
  line-height: 1.25;
}
[data-md-color-scheme="slate"] .md-nav--secondary {
  border-left-color: rgba(130,177,255,.32);
}

/* Make the "Table of contents" label visible and compact */
.md-nav--secondary > .md-nav__title {
  position: absolute !important;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Show only first-level entries in the integrated ToC */
.md-nav--secondary .md-nav__list > .md-nav__item > nav {
  display: none;
}

/* Tidy long headings */
.md-nav--secondary .md-ellipsis {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Mobile drawer nav cards */
@media (max-width: 960px) {
  .md-nav--primary .md-nav__item { margin-bottom: .4rem; }
  .md-nav--primary .md-nav__link {
    border: 1px solid rgba(13,71,161,.16);
    border-radius: 12px;
    box-shadow: 0 8px 18px rgba(13,71,161,.08);
    padding: .65rem .85rem;
    transition: transform .16s ease, box-shadow .16s ease;
  }
  .md-nav--primary .md-nav__link:hover,
  .md-nav--primary .md-nav__link:focus {
    transform: translateY(-1px);
    box-shadow: 0 10px 22px rgba(13,71,161,.12);
  }
}

/* Upcoming table styling */
.table-upcoming table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  border-radius: 14px;
  overflow: hidden;
  box-shadow: 0 16px 36px rgba(13,71,161,.1);
}
.table-upcoming thead th,
.table-upcoming tbody td {
  padding: .85rem 1rem;
}
.table-upcoming thead th {
  background: rgba(13,71,161,.12);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .05em;
  font-size: .75rem;
}
.table-upcoming tbody tr:nth-child(even) td {
  background: rgba(13,71,161,.04);
}
[data-md-color-scheme="slate"] .table-upcoming table {
  box-shadow: 0 16px 38px rgba(4,9,20,.7);
}
[data-md-color-scheme="slate"] .table-upcoming thead th {
  background: rgba(130,177,255,.2);
}
[data-md-color-scheme="slate"] .table-upcoming tbody tr:nth-child(even) td {
  background: rgba(130,177,255,.12);
}

/* Footer styling */
.md-footer {
  background: linear-gradient(180deg, rgba(231,239,251,.94), rgba(218,231,248,.86));
  border-top: 1px solid rgba(13,71,161,.22);
  color: rgba(9,27,61,.88);
}
.md-footer a,
.md-footer .md-footer__inner { color: inherit; }
.md-footer a:hover { opacity: .85; }
[data-md-color-scheme="default"] .md-footer__inner .md-icon { color: rgba(9,27,61,.8); }
[data-md-color-scheme="slate"] .md-footer {
  background: linear-gradient(180deg, rgba(11,24,49,.94), rgba(8,12,24,.9));
  border-top-color: rgba(130,177,255,.36);
  color: rgba(227,242,253,.86);
}
[data-md-color-scheme="slate"] .md-footer a { color: rgba(227,242,253,.88); }
[data-md-color-scheme="slate"] .md-footer a:hover { opacity: 1; }
[data-md-color-scheme="slate"] .md-typeset .grid.cards > ul > li .card-subtitle {
  color: rgba(173,208,255,.82);
}
